<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race Admin Dashboard</title>
    <link rel="stylesheet" href="admin-style.css">
</head>
<body>
    <!-- Login Gate (visible by default) -->
    <div class="login-container" id="loginContainer">
        <div class="login-card">
            <div class="login-header">
                <h1>üèÅ Race Admin</h1>
                <p>Enter password to access dashboard</p>
            </div>
            <form class="login-form" id="loginForm">
                <div class="input-group">
                    <label for="password">Password</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="Enter admin password"
                        required
                        autocomplete="current-password"
                    >
                </div>
                <button type="submit" class="login-btn">
                    <span class="btn-text">Access Dashboard</span>
                    <span class="btn-loading hidden">Authenticating...</span>
                </button>
                <div class="error-message hidden" id="loginError">
                    Invalid password. Please try again.
                </div>
            </form>
        </div>
    </div>

    <!-- Main Admin Interface (hidden by default) -->
    <div class="admin-container hidden" id="adminContainer">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="admin-title">Race Admin Dashboard</h1>
                    <div class="connection-status">
                        <span class="status-dot" id="connectionDot"></span>
                        <span class="status-text" id="connectionStatus">Connecting...</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="logout-btn" id="logoutBtn">
                        <span>üö™</span> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Add New Finisher Form -->
            <section class="add-section">
                <div class="section-header">
                    <h2>Add New Finisher</h2>
                    <button class="toggle-form-btn" id="toggleFormBtn">
                        <span>‚ûï</span> Show Form
                    </button>
                </div>
                
                <div class="add-form-container hidden" id="addFormContainer">
                    <form class="add-form" id="addFinisherForm">
                        <div class="form-row">
                            <div class="input-group">
                                <label for="bibNumber">Bib Number</label>
                                <input 
                                    type="number" 
                                    id="bibNumber" 
                                    name="bibNumber" 
                                    placeholder="e.g., 123"
                                    min="1"
                                    max="9999"
                                    required
                                >
                            </div>
                            <div class="input-group">
                                <label for="racerName">Racer Name</label>
                                <input 
                                    type="text" 
                                    id="racerName" 
                                    name="racerName" 
                                    placeholder="e.g., John Smith"
                                    maxlength="50"
                                    required
                                >
                            </div>
                            <div class="input-group">
                                <label for="finishTime">Finish Time (MM:SS.ms)</label>
                                <input 
                                    type="text" 
                                    id="finishTime" 
                                    name="finishTime" 
                                    placeholder="e.g., 05:21.35"
                                    pattern="^[0-9]{2}:[0-9]{2}\.[0-9]{2}$"
                                    title="Format: MM:SS.ms (e.g., 05:21.35)"
                                    required
                                >
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="add-btn">
                                <span class="btn-text">Add Finisher</span>
                                <span class="btn-loading hidden">Adding...</span>
                            </button>
                            <button type="button" class="cancel-btn" id="cancelAddBtn">Cancel</button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Leaderboard Section -->
            <section class="leaderboard-section">
                <div class="section-header">
                    <h2>Current Leaderboard</h2>
                    <div class="leaderboard-actions">
                        <button class="refresh-btn" id="refreshBtn">
                            <span>üîÑ</span> Refresh
                        </button>
                        <span class="record-count" id="recordCount">0 finishers</span>
                    </div>
                </div>

                <div class="table-container">
                    <div class="loading-state" id="loadingState">
                        <div class="spinner"></div>
                        <p>Loading race data...</p>
                    </div>

                    <div class="empty-state hidden" id="emptyState">
                        <div class="empty-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                        <h3>No Finishers Yet</h3>
                        <p>Add the first finisher to get started</p>
                    </div>

                    <div class="table-wrapper hidden" id="tableWrapper">
                        <table class="admin-table" id="adminTable">
                            <thead>
                                <tr>
                                    <th class="drag-handle-header">
                                        <span title="Drag to reorder">‚ãÆ‚ãÆ</span>
                                    </th>
                                    <th>Rank</th>
                                    <th>Bib #</th>
                                    <th>Racer Name</th>
                                    <th>Finish Time</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminTableBody">
                                <!-- Dynamic content will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay hidden" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="modalMessage">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn confirm-btn" id="confirmBtn">Confirm</button>
                <button class="modal-btn cancel-btn" id="modalCancelBtn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer">
        <!-- Toast messages will be dynamically inserted here -->
    </div>

    <script src="admin-script.js"></script>
</body>
</html>
